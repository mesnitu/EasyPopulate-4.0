!function(e){function t(t,a,i,o){var d=void 0===o?!1:o;return a=void 0===a?!0:a,i=void 0===i?!0:i,t="object"==typeof t?t:e(t),i&&l(t),!t.length||c(t)?!d:(t.is("[required]")&&(!t.is("[type=checkbox]")&&""==t.val()||t.is("[type=checkbox]")&&!t.is(":checked")||t.is("select")&&!t.find("option:selected").length)?(d=!0,a&&s(t,t.is("[type=checkbox]"))):h.use_filter&&t.attr("filter")&&!n(t)&&(d=!0,a&&r(t,t.is("[type=checkbox]"))),!d)}function a(e){var t=!n(e,h);h.use_filter&&e.attr("filter")&&t?r(e,e.is("[type=checkbox]")):""!==e.val()&&e.attr("filter")&&!t?o(e,e.is("[type=checkbox]")):l(e)}function i(e,t,a){return t.val().length>a?void e.preventDefault():void t.siblings(".at-description").find("span.at-counter").html(t.val().length)}function n(e){var t,a=void 0!==e.attr("filter")&&-1!==e.attr("filter").indexOf("|")?e.attr("filter").split("|"):[e.attr("filter")],i=/^(\w\d)+/,n=!1;for(t in a)if(i=a[t],"undefined"!=typeof i&&-1!==i.indexOf(":")){if(i=a[t].split(":"),n=""!==e.val()&&!("undefined"!=typeof p[i[0]]&&p[i[0]](e.val(),e.parents("form").find("#"+i[1]).val()||i[1])))break}else if(i=p[i],n=""!==e.val()&&!e.val().match(i))break;return!n}function o(t,a){l(t),t.addClass("at-success"),t.closest(".form-group").addClass("has-success").addClass("has-feedback"),!a&&t.is(":visible")&&t.after(e("<span />",{"class":"glyphicon glyphicon-ok form-control-feedback"}))}function r(t,a){var i=t.data("invalid")||(h.messages.invalid?h.messages.invalid:"This field has invalid data"),n=t.data("place-after")||t;l(t),t.addClass("at-invalid"),t.closest(".form-group").addClass("has-warning").addClass("has-feedback"),a?t.parent("label").after(e("<span />",{"class":"at-warning",html:i})):(e(n).after(e("<"+(h.tag?h.tag:"p")+"/>",{"class":"at-warning",html:i})),t.is(":visible")&&e(n).after(e("<span />",{"class":"glyphicon glyphicon-warning-sign form-control-feedback"})))}function s(t,a){var i=t.data("required")||(h.messages.required?h.messages.required:"This field is required"),n=t.data("place-after")||t,o=t.data("place-after")||(t.closest(".form-group").hasClass("input-group")?t.closest(".form-group"):t);l(t),t.addClass("at-required"),t.closest(".form-group").addClass("has-error").addClass("has-feedback"),a?(t.parent().find(".at-error,.at-warning,.at-info,.at-success").remove(),t.next("label").after(e("<span />",{"class":"at-error",html:"&nbsp;"+i}))):(e(o).after(e("<"+(h.tag?h.tag:"p")+"/>",{"class":"at-error",html:i})),t.is(":visible")&&e(n).after(e("<span />",{"class":"glyphicon glyphicon-remove form-control-feedback"})))}function l(e){e.removeClass("at-required at-invalid at-success"),e.is("[type=checkbox]")?e.siblings(".form-control-feedback, .at-error, .at-warning, .at-info, .at-success").remove():(e.closest(".form-group").hasClass("input-group")&&e.closest(".form-group").siblings(".form-control-feedback, .at-error, .at-warning, .at-info").remove(),e.closest(".form-group").removeClass("has-error has-warning has-success has-feedback"),e.siblings(".form-control-feedback, .at-error, .at-warning, .at-info, .at-success").remove())}function d(){e(".at-error, .at-warning, .at-info, .form-control-feedback").remove(),e(".at-required, .at-invalid, .at-success, .has-error, .has-warning, .has-feedback, .has-success").removeClass("at-required at-invalid at-success has-error has-warning has-feedback has-success")}function c(t){var a=["submit","reset","button","image"];return!(!t.is("input")||-1===(t.is("input")&&e.inArray(t.prop("type"),a)))}var f="2.1.6",u={form_validate:"novalidate",form_autocomplete:"off",tag:"p",lost_focus:!0,highlight:{marker:"*",position:"post"},messages:{submit:"Wait ...",required:"Required field",invalid:"Field with invalid data",textarea_help:'Typed <span class="at-counter">{0}</span> of {1}'},use_filter:!0,before_validate:null,after_validate:null},p={email:/^[\w!#$%&'*+\/=?^`{|}~-]+(\.[\w!#$%&'*+\/=?^`{|}~-]+)*@(([\w-]+\.)+[A-Za-z]{2,}|\[\d{1,3}(\.\d{1,3}){3}\])$/,url:/^(http[s]?:\/\/|ftp:\/\/)?(www\.)?(([\w-]+\.)+[A-Za-z]{2,}|\[\d{1,3}(\.\d{1,3}){3}\])$/,number:/^([0-9])+$/,decimal:/^([0-9]{0,3}(\,|\.){0,1}){0,2}[0-9]{1,3}(\,[0-9]{2}|\.[0-9]{2}){0,1}$/,date_br:/^([0-9]|[0,1,2][0-9]|3[0,1])\/(0[1-9]|1[0,1,2])\/\d{4}$/,date:/^\d{4}-(0[0-9]|1[0,1,2])-([0,1,2][0-9]|3[0,1])$/,time:/^([0-1][0-9]|[2][0-3])(:([0-5][0-9])){1,2}$/,phone_br:/^\(?\d{2}\)?[\s-]?([9]){0,1}\d{4}-?\d{4}$/,phone_jp:/^(((\(0\d{1}\)[\s-]?|0\d{1}-?)[2-9]\d{3}|(\(0\d{2}\)[\s-]?|0\d{2}-?)[2-9]\d{2,3}|(\(0\d{3}\)[\s-]?|0\d{3}-?)[2-9]\d{1}|(\(0\d{4}\)[\s-]?|0\d{4}-?)[2-9])-?\d{4}|(\(0\d{3}\)[\s-]?|0\d{3}-?)[2-9]\d{2}-?\d{3})$/,zipcode_us:/^([A-Z][0-9]){3}$/,zipcode_br:/^[0-9]{2}\.{0,1}[0-9]{3}\-[0-9]{3}$/,zipcode_jp:/^[0-9]{3}\-?[0-9]{4}$/,valid_ip:/^\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b$/,min_length:function(e,t){return e.length>=t},max_length:function(e,t){return e.length<=t},matches:function(t,a){try{a=e("#"+a).val()||a}catch(i){}return t==a},greater_than:function(e,t){return e.match(p.number)&&t.match(p.number)?parseInt(e,10)>parseInt(t,10):!1},less_than:function(e,t){return e.match(p.number)&&t.match(p.number)?parseInt(e,10)<parseInt(t,10):!1}},h={},v={version:function(){return this.each(function(){e(this).html(f)})},init:function(n){return h=e.extend({},u,n),this.each(function(){var n=e(this);n.data("old-autocomplete",n.attr("autocomplete")),n.data("old-novalidate",n.attr("novalidate")),n.attr("autocomplete",h.autocomplete||h.form_autocomplete?h.autocomplete||h.form_autocomplete:"off"),n.attr("novalidate",h.novalidate||h.form_novalidate?h.novalidate||h.form_novalidate:"novalidate"),n.find("button[type=reset], input[type=reset]").each(function(t,a){e(a).on("click.valida",function(){d(),e("input, select, textarea").filter(":first").focus()})}),n.find("input, select, textarea").each(function(t,n){n=e(n),c(n)||(n.is("[required]")&&null!==h.highlight&&h.highlight!==!1&&e("[for="+n.attr("id")+"]").html("pre"==h.highlight.position?'<span class="at-required-highlight" >'+h.highlight.marker+"</span>&nbsp;"+e("[for="+n.attr("id")+"]").html():e("[for="+n.attr("id")+"]").html()+'&nbsp;<span class="at-required-highlight" >'+h.highlight.marker+"</span>"),h.lost_focus&&n.on("blur.valida",function(){(n.is("select")&&n.is("[required]")&&(""===n.find("option").filter(":selected").val()||!n.find("option").length)||n.is("textarea")&&n.is("[required]")&&""===n.val()||n.is("input")&&"checkbox"===n.prop("type")&&n.is("[required]")&&!n.is(":checked")||n.is("input")&&"checkbox"!==n.prop("type")&&n.is("[required]")&&""===n.val())&&s(n,n.is("[type=checkbox]"))}),n.is("textarea")&&n.attr("maxlength")&&(n.after(e("<div />",{"class":"help-block at-description",html:(n.data("help")||(h.messages.textarea_help?h.messages.textarea_help:'Typed <span class="at-counter">{0}</span> of {1}')).replace("{1}",n.attr("maxlength")).replace("{0}",n.val().length)})),n.on("keyup.valida",function(e){i(e,n,n.attr("maxlength"))}).on("keydown.valida",function(e){i(e,n,n.attr("maxlength"))})),n.on("change.valida",function(){""!==n.val()&&n.is("select")&&l(n)}),n.is("input")&&"checkbox"===n.prop("type")&&n.is("[required]")?n.on("click.valida",function(){l(n),n.is(":checked")||s(n,n.is("[type=checkbox]"))}):n.on("keyup.valida",function(){""!==n.val()&&a(n)}).on("keydown.valida",function(){a(n)}))}),n.on("submit.valida",function(a){var i=!1;if(d(),h.before_validate&&e.isFunction(h.before_validate)&&(i=!h.before_validate(a)),n.find("button[type=submit], input[type=submit]").each(function(t,a){a=e(a),a.prop("disabled",!0).data("old-value",a.is("input")?a.val():a.html()),a.is("input")?a.val(h.messages.submit||"Wait ..."):a.html(h.messages.submit||"Wait ...")}),n.find("input, select, textarea").each(function(a,n){n=e(n),i=!t(n,!0,!1,i)}),h.after_validate&&e.isFunction(h.after_validate)&&(i=!h.after_validate(a,i)),i){a.preventDefault(),n.find("button[type=submit], input[type=submit]").each(function(t,a){a=e(a),a.prop("disabled",!1),a.is("input")?a.val(a.data("old-value")):a.html(a.data("old-value"))});var o=Math.ceil(e(window).height()/2);return e(".at-required:visible, .at-invalid:visible").length>0&&e("html,body").animate({scrollTop:e(".at-required:visible, .at-invalid:visible").filter(":first").offset().top-o},"fast",function(){e(".at-required:visible, .at-invalid:visible").filter(":first").focus()}),!1}})})},destroy:function(){var t=e(this);t.attr("autocomplete",t.data("old-autocomplete")),t.attr("novalidate",t.data("old-novalidate")),t.find("button, input[type=reset]").off("valida"),t.find("button, input[type=reset]").unbind(".valida"),t.find("input, select, textarea").off("valida"),t.find("input, select, textarea").unbind(".valida"),t.find(".help-block.at-description").remove(),t.off("valida"),t.unbind(".valida"),t.valida=null},partial:function(a,i,n){var o=t(a,i,n);if(o){var r=Math.ceil(e(window).height()/2);e(".at-required:visible, .at-invalid:visible").length>1&&e("html,body").animate({scrollTop:e(".at-required:visible, .at-invalid:visible").filter(":first").offset().top-r},"fast",function(){e(".at-required:visible, .at-invalid:visible").filter(":first").focus()})}return o}};e.fn.valida=function(t){return v[t]?v[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.valida()"):v.init.apply(this,arguments)}}(jQuery),jQuery.fn.getFormValues=function(){var e={};return jQuery.each(jQuery(":input",this).serializeArray(),function(t,a){void 0==e[a.name]?e[a.name]=a.value:typeof e[a.name]==Array?e[a.name].push(a.value):e[a.name]=[e[a.name],a.value]}),e},$(document).ready(function(){$("body").prepend('<div id="load"></div>'),$(".pageHeading").parent().addClass("container-fluid"),$(".pageHeading").next().addClass("l-right col-xs-12 col-sm-3");var e=$(".l-right").next();e.next().addClass("l-left col-xs-12 col-sm-9"),$(".ep4bookx-btn-options").click(function(){$(".ep4bookx-section").toggleClass("ep4bookx-section-open")}),$("#ep4bookx-config input[type=checkbox]").click(function(){var e=$(this).val();$(this).next().attr("value",e)}),$("#myModal").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=t.data("what"),i=$(this);if("read-readme"===a){var n="readme";$.post("easypopulate_4.php",{ep4bookx_action:n}).done(function(e,t,a){var n=$("<div />").append(a.responseText).addClass("wrap-read-inner");i.find(".modal-title").text("EP4Bookx v0.9.9 r2- A EasyPopulate 4.0 fork"),i.find(".modal-body").html(n)}).fail(function(e){alert(e.responseText)})}if("read-config"===a){var o="read",r=t.attr("id");$.post("easypopulate_4.php",{ep4bookx_read:r,ep4bookx_action:o}).done(function(e,t,a){var n=$("<div />").append(a.responseText);i.find(".modal-title").text("Configuration file for "+r),i.find(".modal-body").html(n)}).fail(function(e){alert(e.responseText)})}}),$(".delete").click(function(){$("#load").fadeIn();var e=$(this).parentsUntil(".customize-fields-single"),t=$(this).attr("id"),a="delete";$(this).next().attr("id");return $.post("easypopulate_4.php",{ep4bookx_layout:t,ep4bookx_action:a}).done(function(t,a,i){var n=i.responseText;console.log(n),e.slideUp("slow",function(){}),0==n&&location.reload(!0),$("#load").fadeOut("slow")}).fail(function(e){alert(e.responseText),location.reload(!0)}),!1}),$("#bookx_fields_enable").valida({form_validate:"novalidate",form_autocomplete:"off",tag:"p",lost_focus:!0,highlight:{marker:"*",position:"post"},messages:{submit:"Wait ...",required:"Required field",invalid:"Field with invalid data",textarea_help:'Typed <span class="has-warning">{0}</span> of {1}'},use_filter:!0,before_validate:null,after_validate:function(e,t){if(!t){$("#load").fadeIn();var a="save_layout",i=$("#bookx_fields_enable").getFormValues();return $.post("easypopulate_4.php",{ep4bookx_action:a,setFields:i}).done(function(e,t,a){$("<div />").append(a.responseText);$("#load").fadeOut("slow"),location.reload(!0),console.log(e)}).fail(function(e){alert(e.responseText)}),!1}return!t}})});